# üõ°Ô∏è Proceso de Backup y Recuperaci√≥n - Nordia POS

## üì¶ Backup Creado

- **Fecha**: 2025-09-16 23:19 UTC
- **Versi√≥n**: 3.0-original
- **Ubicaci√≥n**: `/frontend/src/components-backup-20250916/`
- **Motivo**: Pre-transformaci√≥n UI/UX suprema hacia nivel Mercado Pago/Ual√°

## üöÄ C√≥mo Restaurar

### M√©todo Autom√°tico (Recomendado)
```bash
# Desde la ra√≠z del proyecto
npm run restore-backup 20250916

# O directamente con Node.js
node scripts/restore-backup.js 20250916
```

### M√©todo Manual
```bash
# Copiar archivos desde backup
cp -r frontend/src/components-backup-20250916/modules/* frontend/src/components/modules/
cp frontend/src/components-backup-20250916/app/* frontend/src/app/
cp frontend/src/components-backup-20250916/lib/* frontend/src/lib/

# Reinstalar dependencias
cd frontend
rm -rf node_modules package-lock.json
npm install
npm run build
```

## üìã Archivos Incluidos en el Backup

| Archivo | L√≠neas | Tama√±o | Funcionalidad |
|---------|--------|--------|---------------|
| `page.tsx` | 426 | 15.4KB | **Interfaz principal F1** |
| `layout.tsx` | 35 | 0.8KB | Layout base con tipograf√≠as |
| `globals.css` | 436 | 9.8KB | **Sistema CSS Enterprise v3.0** |
| `StockManager.tsx` | 150 | 4.8KB | **M√≥dulo F3 - Gesti√≥n Stock** |
| `BarcodeScanner.tsx` | 98 | 3.1KB | **M√≥dulo F11 - Scanner** |
| `CashRegister.tsx` | 187 | 6.6KB | **M√≥dulo F8 - Caja** |
| `api.ts` | 69 | 2.0KB | **Cliente API REST** |

**Total**: 7 archivos, 1,401 l√≠neas, 42.5KB

## üîç Verificaci√≥n Post-Restauraci√≥n

Ejecutar esta checklist despu√©s de restaurar:

### ‚úÖ Funcionalidades Core
- [ ] **F1 - Ventas**: Cat√°logo productos, carrito, checkout completo
- [ ] **F3 - Stock**: Upload CSV, agregar productos, lista inventario
- [ ] **F8 - Caja**: Apertura, movimientos, cierre Z, reportes
- [ ] **F11 - Scanner**: Activaci√≥n c√°mara, decodificaci√≥n c√≥digos

### ‚úÖ Integraciones
- [ ] **Conexi√≥n API**: Endpoints backend responden
- [ ] **M√©todos Pago**: Efectivo, tarjeta, MercadoPago
- [ ] **Base de Datos**: Productos, ventas, stock sincronizado

### ‚úÖ UI/UX Original
- [ ] **Estilos**: CSS enterprise v3.0 aplicado
- [ ] **Colores**: Verde esmeralda (#10B981) + azul el√©ctrico
- [ ] **Tipograf√≠a**: Inter + Roboto Mono cargadas
- [ ] **Responsive**: Grid/flexbox en m√≥vil y desktop

### ‚úÖ Atajos de Teclado
- [ ] **F1**: M√≥dulo ventas activo
- [ ] **F3**: M√≥dulo stock activo
- [ ] **F8**: M√≥dulo caja activo
- [ ] **F11**: Scanner modal abierto
- [ ] **F12**: Procesar venta

### ‚úÖ Performance
- [ ] **Build**: `npm run build` exitoso
- [ ] **Desarrollo**: `npm run dev` sin errores
- [ ] **Navegaci√≥n**: Cambio m√≥dulos fluido
- [ ] **Carga**: Productos renderizados < 2 segundos

## üîß Script de Restauraci√≥n

El script `/scripts/restore-backup.js` incluye:

### Caracter√≠sticas
- ‚úÖ **Verificaci√≥n integridad**: Valida todos los archivos existen
- ‚úÖ **Backup seguridad**: Respalda archivos actuales antes de sobrescribir
- ‚úÖ **Reinstalaci√≥n dependencias**: Limpia node_modules y reinstala
- ‚úÖ **Verificaci√≥n build**: Confirma que proyecto compila
- ‚úÖ **Logging detallado**: Reporta cada paso del proceso

### Salida Esperada
```
üîÑ Iniciando restauraci√≥n de backup del 20250916...
üìã Leyendo manifest del backup...
   Versi√≥n: 3.0-original
   Archivos: 7
   Fecha backup: 2025-09-16T23:19:00Z
üîç Verificando integridad del backup...
   ‚úÖ Todos los archivos de backup est√°n presentes
üíæ Creando backup de archivos actuales en: components-backup-current-1726523940123
üìÅ Restaurando archivos...
   ‚úÖ /src/app/page.tsx
   ‚úÖ /src/app/layout.tsx
   ‚úÖ /src/app/globals.css
   ‚úÖ /src/components/modules/StockManager.tsx
   ‚úÖ /src/components/modules/BarcodeScanner.tsx
   ‚úÖ /src/components/modules/CashRegister.tsx
   ‚úÖ /src/lib/api.ts
üßπ Limpiando node_modules y reinstalando dependencias...
üî® Verificando que el proyecto compile...
   ‚úÖ Proyecto compila correctamente

üéâ RESTAURACI√ìN COMPLETADA EXITOSAMENTE
```

## üö® Resoluci√≥n de Problemas

### Error: "Backup no encontrado"
```bash
# Listar backups disponibles
ls frontend/src/components-backup-*/

# Verificar fecha correcta
node scripts/restore-backup.js
```

### Error: "Archivos faltantes"
```bash
# Verificar integridad manualmente
cat frontend/src/components-backup-20250916/backup-manifest.json

# Restaurar archivos individualmente
cp frontend/src/components-backup-20250916/app/page.tsx frontend/src/app/
```

### Error: "No compila despu√©s de restaurar"
```bash
# Limpiar completamente
cd frontend
rm -rf node_modules .next package-lock.json
npm install
npm run build
```

### Error: "Funcionalidad no responde"
```bash
# Verificar API backend activo
curl https://nordia-backend.onrender.com/api/products

# Revisar console browser para errores JS
# Verificar .env.local tiene variables correctas
```

## üìÇ Estructura de Backups

```
frontend/src/
‚îú‚îÄ‚îÄ components-backup-20250916/     # ‚Üê BACKUP ORIGINAL
‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StockManager.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BarcodeScanner.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CashRegister.tsx
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api.ts
‚îÇ   ‚îî‚îÄ‚îÄ backup-manifest.json
‚îú‚îÄ‚îÄ components-backup-current-*/    # ‚Üê Backup autom√°tico pre-restauraci√≥n
‚îî‚îÄ‚îÄ [archivos actuales]
```

## üéØ Siguiente Paso

Una vez verificado que el backup funciona correctamente:

**‚úÖ Proceder con**: `prompt-003-setup-design-system.md`

El backup garantiza **rollback 100% seguro** en cualquier momento durante la transformaci√≥n UI/UX.

---

**‚ö° EMERGENCY ROLLBACK**: `npm run restore-backup 20250916`
**üìû Soporte**: Revisar `audit-report.md` para contexto completo